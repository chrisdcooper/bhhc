{"remainingRequest":"C:\\src\\vue\\bhhc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\src\\vue\\bhhc\\src\\components\\Email.vue?vue&type=style&index=0&id=6d29099c&scoped=true&lang=css&","dependencies":[{"path":"C:\\src\\vue\\bhhc\\src\\components\\Email.vue","mtime":1576768338564},{"path":"C:\\src\\vue\\bhhc\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue\\bhhc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\src\\vue\\bhhc\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\src\\vue\\bhhc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue\\bhhc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZW1haWxib3hzZXBlcmF0b3J7ZmxvYXQ6IGxlZnQ7fQ0KLmVtYWlsYm94c21hbGx7ZmxvYXQ6IGxlZnQ7bWF4LXdpZHRoOiAyNTBweH0NCi5lbWFpbGJveGxhcmdle2Zsb2F0OiBsZWZ0O21heC13aWR0aDogMjUwcHh9DQo="},{"version":3,"sources":["Email.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6MA;AACA;AACA","file":"Email.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n        <div style=\"width:100%\">\r\n          <label class=\"lbldetail emailboxseperator\">{{emailtypelbl}}:</label>\r\n        </div> \r\n        <div style=\"width:100%;float:left\">\r\n        <b-form-input\r\n            :id=\"emailprefixid\"\r\n            v-model=\"emailprefixprop\"\r\n            :ref=\"emailprefixid\"\r\n            class=\"emailboxsmall\"\r\n            trim\r\n            maxlength=\"35\"\r\n            size=\"sm\" \r\n            :state=\"emailstate\"\r\n        ></b-form-input>        \r\n        <span class=\"emailboxseperator\">&nbsp;@&nbsp;</span>\r\n        <b-form-input\r\n            :id=\"emailsuffixid\"\r\n            v-model=\"emailsuffixprop\"\r\n            :ref=\"emailsuffixid\"\r\n            class=\"emailboxlarge\"\r\n            trim\r\n            maxlength=\"35\"\r\n            size=\"sm\" \r\n            :state=\"emailstate\"\r\n        ></b-form-input>  \r\n        </div>  \r\n      <b-modal :id=\"'bv-modal-email-error'+typeofemail\" :title=\"camelize(typeofemail) + ' Email'\" class=\"bv-modal-email-error\" size=\"sm\">\r\n        <div class=\"row\"> \r\n          <div class=\"col\"> \r\n            <span>Please correct any errors identified on email address to update the email address.</span>\r\n          </div>      \r\n        </div>  \r\n      </b-modal>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport apiurl from '../config/production';\r\nvar apival = apiurl();\r\nvar bunyan = require('bunyan');\r\nvar log = bunyan.createLogger({name: \"Enlist_App_emailVue\"});\r\nimport {bus} from '../main';\r\n\r\nexport default {\r\n  name: 'Email',  \r\n  components: { \r\n  },\r\n  props: { \r\n      entityid:String,\r\n      lmsid:String,\r\n      typeofemail:String,\r\n      emailaddress:String,\r\n      emailtypelbl:String,\r\n      emailprefixid:String,\r\n      emailsuffixid:String,\r\n      makeToast: Function,      \r\n      camelize: Function,\r\n      runupdate:Boolean,\r\n      ft:Boolean,\r\n      containsSpecialCharacters:Function\r\n  },\r\n  data() {\r\n    return {\r\n      emailprefixpropval:'',\r\n      emailsuffixpropval:'',\r\n      emailaddresspropval:'',\r\n      runupdatepropval:true\r\n    };\r\n  },\r\n  mounted:function(){    \r\n    bus.$on('submitsave', this.submit);\r\n  },  \r\n  computed: {\r\n    emailstate:  function() {     \r\n      var isEmpty =  (this.emailprefixprop.length == 0 && this.emailsuffixprop.length == 0);\r\n      var chkstate = isEmpty ||\r\n        (!!this.emailprefixprop.length && !!this.emailsuffixprop.length);\r\n        \r\n      if (typeof this.containsSpecialCharacters === \"function\") { \r\n        if(chkstate) {\r\n          chkstate = !this.containsSpecialCharacters(this.emailprefixprop);\r\n        }\r\n        if(chkstate) {\r\n          chkstate = !this.containsSpecialCharacters(this.emailsuffixprop);\r\n        }\r\n      }\r\n      return chkstate;     \r\n    },\r\n    emailaddressprop:  {      \r\n      get: function() {\r\n        var self = this;\r\n        if(self.ft){\r\n            self.emailaddresspropval = this.emailaddress;\r\n        }\r\n        return self.emailaddresspropval.trim();\r\n      },\r\n      set: function(newValue) {\r\n        this.emailaddresspropval = newValue;\r\n      }      \r\n    },\r\n    emailprefixprop: {      \r\n      get: function() {\r\n        var self = this;\r\n        if(self.ft){\r\n            self.emailprefixpropval = this.emailaddressonepref;\r\n        }\r\n        return self.emailprefixpropval.trim();\r\n      },\r\n      set: function(newValue) {\r\n        this.emailprefixpropval = newValue;\r\n      }      \r\n    },\r\n    emailsuffixprop: {      \r\n      get: function() {\r\n        var self = this;\r\n        if(self.ft){\r\n            self.emailsuffixpropval = this.emailaddressonesuff;\r\n        }\r\n        return self.emailsuffixpropval.trim();\r\n      },\r\n      set: function(newValue) {  \r\n        this.emailsuffixpropval = newValue;\r\n      }      \r\n    },\r\n    emailaddressonepref: function(){\r\n        if(this.emailaddress){\r\n          if(this.emailaddress.length > 0) {\r\n            var spltArry = this.emailaddress.split(\"@\");\r\n            if(spltArry.length > 0){\r\n              return spltArry[0].toString();\r\n            }\r\n          }  \r\n        }\r\n        return '';\r\n    },\r\n    emailaddressonesuff: function(){\r\n        if(this.emailaddress){\r\n          if(this.emailaddress.length > 0) {\r\n            var spltArry = this.emailaddress.split(\"@\");\r\n            if(spltArry.length > 1){\r\n              return spltArry[1].toString();\r\n            }\r\n          }  \r\n        }\r\n        return '';\r\n    },\r\n    runupdateprop: {      \r\n      get: function() {\r\n        var self = this;\r\n        self.runupdatepropval = this.runupdate;   \r\n        return self.runupdatepropval;\r\n      },\r\n      set: function(newValue) {\r\n        this.runupdatepropval = newValue;\r\n      }      \r\n    },\r\n  },\r\n  methods:{\r\n    submit: function(){    \r\n      if(this.runupdateprop == true){\r\n        if(this.emailstate) {\r\n          var emaila = this.emailprefixprop.trim() + '@' + this.emailsuffixprop.trim();     \r\n          if(emaila.length > 1) {\r\n            var self = this;   \r\n            var jsonvals = JSON.stringify({\r\n                  data: {\r\n                    'lmsid':self.lmsid,     \r\n                    'typeofemail':self.typeofemail,\r\n                    'emailaddress':emaila\r\n                  }\r\n                });\r\n            fetch(apival+'enlistapi/updateemaildata', {\r\n                method: 'Post',\r\n                credentials: 'include',\r\n                body:jsonvals,\r\n                headers:{\r\n                  'Accept': 'application/json',\r\n                  'Content-Type': 'application/json'\r\n                }\r\n            }).then(function(response) {\r\n              return response.json();\r\n            }).then(function(jsonret) {          \r\n              var resu = jsonret.data;\r\n              if(resu == 'SUCCESS'){\r\n                //self.makeToast(\"Email Saved\", \"Email saved successfully.\", \"success\");\r\n                self.runupdateprop = false;         \r\n                bus.$emit('UpdateEmailRowData',  jsonvals);\r\n              }\r\n            }).catch(function(err) {\r\n                log.error('enlistapi/updateemaildata'+err); \r\n            });        \r\n          }\r\n        } else {\r\n          this.makeToast(this.camelize(this.typeofemail) + ' Email', 'Please correct any errors identified on '+ this.typeofemail + ' email to save the data.', \"danger\");\r\n          //this.$bvModal.show(\"bv-modal-email-error\"+this.typeofemail);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.emailboxseperator{float: left;}\r\n.emailboxsmall{float: left;max-width: 250px}\r\n.emailboxlarge{float: left;max-width: 250px}\r\n</style>"]}]}